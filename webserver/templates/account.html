{% extends 'layout.html' %}

{% block content %}
<section id="account-details">
    <div class="details">
        <h1>{{ user.username }}</h1>
        <p>Email: {{ user.email }}</p>
        <form action="/update_bio" method="post">
            <p>
                Bio: <span id="bio-text">{{ user.bio if user.bio else "No bio yet" }}</span>
                <input type="text" name="bio" id="bio-input" value="{{ user.bio }}" style="display: none;">
                <button type="submit" id="bio-submit" style="display: none;">Save</button>
                <button type="button" onclick="toggleEdit('bio')">
                    <i class="fa-solid fa-pen-to-square"></i> Edit
                </button>
            </p>
        </form>
        
        <form action="/update_city" method="post">
            <p>
                City: <span id="city-text">{{ user.city if user.city else "No city yet" }}</span>
                <input type="text" name="city" id="city-input" value="{{ user.city }}" style="display: none;">
                <button type="submit" id="city-submit" style="display: none;">Save</button>
                <button type="button" onclick="toggleEdit('city')">
                    <i class="fa-solid fa-pen-to-square"></i> Edit
                </button>
            </p>
        </form>

        <p>
            <a href="/user/followers">
                    Followers: {{ followers_count }}
            </a> | 
            <a href="/user/following">
                    Following: {{ followed_count }}
            </a>
        </p>
    </div>
</section>

<form>
    <button formaction="/logout">Log Out</button>
</form>

<script>
    function toggleEdit(field) {
        const textElement = document.getElementById(`${field}-text`);
        const inputElement = document.getElementById(`${field}-input`);
        const submitButton = document.getElementById(`${field}-submit`);

        // Toggle display between text and input field
        if (textElement.style.display === 'none') {
            textElement.style.display = 'inline';
            inputElement.style.display = 'none';
            submitButton.style.display = 'none';
        } else {
            textElement.style.display = 'none';
            inputElement.style.display = 'inline';
            submitButton.style.display = 'inline';
            inputElement.focus();
        }
    }
</script>
        
<script src="/static/js/home.js"></script>
{% endblock %}